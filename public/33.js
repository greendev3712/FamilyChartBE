webpackJsonp([33],{"0YHP":function(e,t,s){var n=s("P2Kb");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);s("rjj0")("be2c1a2c",n,!0,{})},"3Zlm":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s("SBvh"),i=s.n(n),a=s("5452"),r=s.n(a),c=s("xT8g"),o=s.n(c),l=s("cmIO");t.default={name:"CheckboxManager",components:{Card:i.a,CardControl:r.a,ContentManager:o.a},props:{title:{type:String,required:!0},data:{type:Object,required:!0},rolePermissions:{type:Array,required:!0},nested:{type:Boolean,default:!1},collapsed:{type:Boolean,default:!1}},computed:{checkbox:function(){return this.$el.querySelector("input[type=checkbox]")},groups:function(){return Object.keys(this.data).filter(function(e){return"_items"!==e})}},methods:{check:function(){this.checkbox.indeterminate=!1,this.checkbox.checked=!0,this.$emit("update")},indeterminate:function(){this.checkbox.checked=!1,this.checkbox.indeterminate=!0,this.$emit("update")},uncheck:function(){this.checkbox.checked=!1,this.checkbox.indeterminate=!1,this.$emit("update")},update:function(){var e=this.$refs.children.filter(function(e){return e.checkbox.checked&&(!e.$refs.content||e.$refs.content.status===l.a)}).length;if(e!==this.$refs.children.length){var t=this.$refs.children.filter(function(e){return e.checkbox.indeterminate}).length;e||t?this.indeterminate():this.uncheck()}else this.check()},updateBelow:function(){this.updateContent(),this.updateChildren()},updateContent:function(){this.$refs.content&&(this.checkbox.checked?this.$refs.content.checkAll():this.$refs.content.uncheckAll())},updateChildren:function(){var e=this;this.$refs.children&&this.$refs.children.forEach(function(t){t.checkbox.checked=e.checkbox.checked,t.updateBelow()})}}}},"3fkj":function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("card",{ref:"card",attrs:{title:e.title,collapsed:e.collapsed,nested:e.nested,controls:1},on:{shrink:function(t){e.$emit("shrink",t)},extend:function(t){e.$emit("extend",t)}}},[s("card-control",{attrs:{slot:"control-1"},slot:"control-1"},[s("div",{staticClass:"has-margin-top-small"},[s("input",{staticClass:"is-checkradio is-info",attrs:{type:"checkbox",id:"checkbox-"+e._uid,name:"checkbox-"+e._uid},on:{change:e.updateBelow}}),e._v(" "),s("label",{staticClass:"is-paddingless",attrs:{for:"checkbox-"+e._uid}})])]),e._v(" "),s("div",{staticClass:"has-padding-large"},[e._l(e.groups,function(t){return s("checkbox-manager",{key:t,ref:"children",refInFor:!0,class:["is-rounded has-margin-top-small",{"raises-on-hover":e.data[t]._items.length}],attrs:{nested:"",collapsed:"",title:t,data:e.data[t],"role-permissions":e.rolePermissions},on:{shrink:function(t){e.$refs.card.shrink(t)},extend:function(t){e.$refs.card.extend(t)},update:e.update}})}),e._v(" "),e.data._items.length?s("content-manager",{ref:"content",attrs:{items:e.data._items,"role-permissions":e.rolePermissions},on:{checked:e.check,indeterminate:e.indeterminate,unchecked:e.uncheck}}):e._e()],2)],1)},staticRenderFns:[]}},"3uJ2":function(e,t,s){(e.exports=s("FZ+f")(!1)).push([e.i,".card[data-v-34a13215]{position:relative}.card.is-rounded .card-header[data-v-34a13215],.card.is-rounded[data-v-34a13215]{border-radius:.5em}.card .card-header .card-header-title[data-v-34a13215]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.card .card-header .icon.angle[aria-hidden=true][data-v-34a13215]{-webkit-transform:rotate(180deg);transform:rotate(180deg)}.card .card-header .icon.angle[data-v-34a13215]{-webkit-transition:-webkit-transform .3s ease;transition:-webkit-transform .3s ease;transition:transform .3s ease;transition:transform .3s ease,-webkit-transform .3s ease}.card .card-content[data-v-34a13215]{-webkit-transition:max-height .4s ease;transition:max-height .4s ease}",""])},5452:function(e,t,s){var n=s("VU/8")(s("S3Uv"),s("xX/S"),!1,null,null,null);e.exports=n.exports},HF6I:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"wrapper"},e._l(e.items,function(t,n){return s("div",{key:n,staticClass:"level is-hoverable is-marginless has-padding-large is-mobile"},[s("div",{staticClass:"item has-padding-small"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.checkedIds,expression:"checkedIds"}],staticClass:"is-checkradio is-info",attrs:{type:"checkbox",id:"checkbox-"+e._uid+"-"+t.id,name:"checkbox-"+e._uid+"-"+t.id},domProps:{value:t.id,checked:Array.isArray(e.checkedIds)?e._i(e.checkedIds,t.id)>-1:e.checkedIds},on:{change:function(s){var n=e.checkedIds,i=s.target,a=!!i.checked;if(Array.isArray(n)){var r=t.id,c=e._i(n,r);i.checked?c<0&&(e.checkedIds=n.concat([r])):c>-1&&(e.checkedIds=n.slice(0,c).concat(n.slice(c+1)))}else e.checkedIds=a}}}),e._v(" "),s("label",{attrs:{for:"checkbox-"+e._uid+"-"+t.id}},[e._v("\n                "+e._s(t.description)+"\n            ")])]),e._v(" "),s("div",{staticClass:"level-right"},[t.is_default?s("span",{staticClass:"tag is-small is-info is-bold has-margin-right-medium"},[e._v("\n                "+e._s(e.__("Default"))+"\n            ")]):e._e(),e._v(" "),t.menu?s("span",{staticClass:"tag is-small is-link is-bold has-margin-right-medium"},[e._v("\n                "+e._s(e.__("Menu"))+"\n            ")]):e._e(),e._v(" "),t.type?s("span",{staticClass:"tag is-small is-warning is-bold"},[e._v("\n                "+e._s(e.__("Write"))+"\n            ")]):e._e(),e._v(" "),t.type?e._e():s("span",{staticClass:"tag is-small is-success is-bold"},[e._v("\n                "+e._s(e.__("Read"))+"\n            ")])])])}),0)},staticRenderFns:[]}},IhVa:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"card"},[e.header?s("header",{staticClass:"card-header has-background-light"},[s("p",{staticClass:"card-header-title"},[e.icon?s("span",{staticClass:"icon is-small has-margin-right-small"},[s("fa",{attrs:{icon:e.icon}})],1):e._e(),e._v(" "),!e.fixed&&e.title?s("span",{staticClass:"is-clickable",on:{click:function(t){e.toggle()}}},[e._v("\n                "+e._s(e.title)+"\n            ")]):e.title?s("span",[e._v("\n                "+e._s(e.title)+"\n            ")]):e._e()]),e._v(" "),e.search?s("div",{staticClass:"has-vertically-centered-content"},[s("p",{staticClass:"control has-icons-left"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.query,expression:"query"}],staticClass:"input is-small",attrs:{type:"search"},domProps:{value:e.query},on:{input:[function(t){t.target.composing||(e.query=t.target.value)},function(t){e.$emit("query-update",e.query)}]}}),e._v(" "),s("span",{staticClass:"icon is-small is-left"},[s("fa",{attrs:{icon:"search"}})],1)])]):e._e(),e._v(" "),e._l(e.controls,function(t){return e._t("control-"+t)}),e._v(" "),null!==e.badge?s("card-control",[s("span",{staticClass:"tag is-link"},[e._v("\n                "+e._s(e.badge)+"\n            ")])]):e._e(),e._v(" "),e.refresh?s("card-control",{on:{click:function(t){e.$emit("refresh")}}},[s("span",{staticClass:"icon is-small"},[s("fa",{attrs:{icon:"sync"}})],1)]):e._e(),e._v(" "),e.fixed?e._e():s("card-control",{on:{click:function(t){e.toggle()}}},[s("span",{staticClass:"icon angle",attrs:{"aria-hidden":!e.expanded}},[s("fa",{attrs:{icon:"angle-down"}})],1)]),e._v(" "),e.removable?s("card-control",{on:{click:function(t){e.destroy()}}},[s("a",{staticClass:"delete is-small"})]):e._e()],2):e._e(),e._v(" "),s("div",{staticClass:"card-content is-paddingless",style:e.contentStyle},[e._t("default")],2),e._v(" "),e._t("footer"),e._v(" "),e.overlay?s("overlay",{attrs:{size:"medium"}}):e._e()],2)},staticRenderFns:[]}},"Kx/m":function(e,t,s){var n=s("VU/8")(s("Srwb"),s("Ljad"),!1,null,null,null);e.exports=n.exports},Ljad:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"columns is-centered"},[s("div",{staticClass:"column is-half is-three-fifths-desktop is-full-touch"},[e.data?s("div",{staticClass:"animated fadeIn"},[s("checkbox-manager",{staticClass:"is-rounded has-margin-top-large",attrs:{title:e.data.role.display_name+"'s "+e.__("Permissions"),"role-permissions":e.data.rolePermissions,data:e.data.permissions}}),e._v(" "),s("button",{staticClass:"button is-success has-margin-top-large is-pulled-right",attrs:{disabled:!e.canAccess("system.roles.setPermissions")},on:{click:e.update}},[e._v("\n                "+e._s(e.__("Update"))+"\n            ")]),e._v(" "),s("div",{staticClass:"is-clearfix"})],1):e._e()])])},staticRenderFns:[]}},NrAz:function(e,t,s){var n=s("3uJ2");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);s("rjj0")("a4f4aea4",n,!0,{})},P2Kb:function(e,t,s){(e.exports=s("FZ+f")(!1)).push([e.i,".level.is-hoverable[data-v-e6cbcbbe]:hover{background:#f5f5f5}.level.is-hoverable .item[data-v-e6cbcbbe]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}",""])},S3Uv:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"CardControl"}},SBvh:function(e,t,s){var n=s("VU/8")(s("kLu8"),s("IhVa"),!1,function(e){s("NrAz")},"data-v-34a13215",null);e.exports=n.exports},Srwb:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s("vKZO"),i=s.n(n);t.default={components:{CheckboxManager:i.a},data:function(){return{data:null}},created:function(){this.fetch()},methods:{fetch:function(){var e=this;axios.get(route("system.roles.getPermissions",this.$route.params.role)).then(function(t){var s=t.data;return e.data=s}).catch(function(t){return e.handleError(t)})},update:function(){var e=this;axios.post(route("system.roles.setPermissions",this.$route.params.role),{rolePermissions:this.data.rolePermissions}).then(function(t){var s=t.data;return e.$toastr.success(s.message)}).catch(function(t){return e.handleError(t)})}}}},cmIO:function(e,t,s){"use strict";s.d(t,"a",function(){return n}),s.d(t,"c",function(){return i}),s.d(t,"b",function(){return a});var n="checked",i="unchecked",a="indeterminate"},"drw+":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s("cmIO");t.default={name:"ContentManager",props:{items:{type:Array,required:!0},rolePermissions:{type:Array,required:!0}},data:function(){return{checkedIds:[]}},computed:{permissionIds:function(){return this.items.map(function(e){return e.id})},status:function(){return this.checkedIds.length===this.permissionIds.length?n.a:0===this.checkedIds.length?n.c:n.b}},watch:{status:{handler:function(){this.$emit(this.status)}},checkedIds:function(){this.removeGroupPermissions(),this.addCheckedPermissions()}},created:function(){this.init()},mounted:function(){this.checkIfEmpty()},methods:{init:function(){var e=this;this.checkedIds=this.permissionIds.filter(function(t){return e.rolePermissions.indexOf(t)>-1})},checkAll:function(){this.checkedIds=JSON.parse(JSON.stringify(this.permissionIds)),this.checkIfEmpty()},uncheckAll:function(){this.checkedIds=[],this.checkIfEmpty()},checkIfEmpty:function(){0===this.items.length&&this.$emit(this.status)},removeGroupPermissions:function(){var e=this;this.permissionIds.forEach(function(t){var s=e.rolePermissions.indexOf(t);-1!==s&&e.rolePermissions.splice(s,1)})},addCheckedPermissions:function(){var e=this;this.checkedIds.forEach(function(t){e.rolePermissions.push(t)})}}}},kLu8:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s("C/JF"),i=s("fhbW"),a=s("5452"),r=s.n(a),c=s("cjTo"),o=s.n(c);n.library.add(i.faSearch,i.faSync,i.faAngleDown),t.default={name:"Card",components:{CardControl:r.a,Overlay:o.a},props:{nested:{type:Boolean,default:!1},collapsed:{type:Boolean,default:!1},icon:{type:[Object,Array,String],default:null},title:{type:String,default:null},search:{type:Boolean,default:!1},badge:{type:Number,default:null},refresh:{type:Boolean,default:!1},fixed:{type:Boolean,default:!1},removable:{type:Boolean,default:!1},controls:{type:Number,default:0},overlay:{type:Boolean,default:!1},scrollable:{type:Boolean,default:!1}},data:function(e){return{query:null,expanded:!e.collapsed}},computed:{searchInput:function(){return this.search?this.$el.querySelector("input[type=search]"):null},header:function(){return this.icon||this.title||this.search||this.badge||this.refresh||!this.fixed||this.removable||this.controls},content:function(){return this.$el.querySelector(".card-content")},maxHeight:function(){return this.collapsed?{"max-height":0}:{}},overflowY:function(){return this.scrollable||!this.expanded?{"overflow-y":"hidden"}:{}},contentStyle:function(){return Object.assign({},this.maxHeight,this.overflowY)}},methods:{toggle:function(){this.$emit("toggle"),this.expanded?this.collapse():this.expand()},expand:function(){var e=this;this.nested&&this.$emit("extend",this.content.scrollHeight),this.$emit("expand"),this.content.style["max-height"]="".concat(this.content.scrollHeight,"px"),setTimeout(function(){e.expanded=!0},400)},collapse:function(){var e=this;this.content.style["max-height"]||(this.content.style["max-height"]="".concat(this.content.scrollHeight,"px")),this.nested&&this.$emit("shrink",this.content.scrollHeight),this.$emit("collapse"),setTimeout(function(){e.content.style["max-height"]=0},1),this.expanded=!1},resize:function(){var e=this;if(this.expanded){var t=parseInt(this.content.style["max-height"],10);this.$nextTick(function(){e.nested&&e.$emit("extend",e.content.scrollHeight-t),e.content.style["max-height"]="".concat(e.content.scrollHeight,"px")})}},shrink:function(e){return this.content.style["max-height"]="".concat(parseInt(this.content.style["max-height"],10)-e,"px"),this.$emit("shrink",e)},extend:function(e){return this.content.style["max-height"]="".concat(parseInt(this.content.style["max-height"],10)+e,"px"),this.$emit("extend",e)},focus:function(){this.searchInput.focus()},clearQuery:function(){this.query=null},destroy:function(){this.$emit("remove"),this.$el.parentNode.removeChild(this.$el),this.$destroy()}}}},vKZO:function(e,t,s){var n=s("VU/8")(s("3Zlm"),s("3fkj"),!1,null,null,null);e.exports=n.exports},xT8g:function(e,t,s){var n=s("VU/8")(s("drw+"),s("HF6I"),!1,function(e){s("0YHP")},"data-v-e6cbcbbe",null);e.exports=n.exports},"xX/S":function(e,t){e.exports={render:function(){var e=this.$createElement;return(this._self._c||e)("a",this._g({staticClass:"card-header-icon"},this.$listeners),[this._t("default")],2)},staticRenderFns:[]}}});
//# sourceMappingURL=33.js.map