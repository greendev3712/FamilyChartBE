{"version":3,"file":"29.js","sources":["webpack:///29.js"],"sourcesContent":["webpackJsonp([29],{\"/Nkn\":function(e,t,s){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.default={name:\"CardControl\"}},\"02GH\":function(e,t,s){var n=s(\"VU/8\")(s(\"bIv0\"),s(\"Xn2I\"),!1,function(e){s(\"i9nV\")},\"data-v-04649f03\",null);e.exports=n.exports},\"4Hs9\":function(e,t,s){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=s(\"02GH\"),i=s.n(n),r=s(\"zhSu\"),a=s.n(r),o=s(\"Rxb0\"),c=s.n(o);t.default={name:\"CheckboxManager\",components:{Card:i.a,CardControl:a.a,ManagerContent:c.a},props:{title:{type:String,required:!0},groupData:{required:!0},rolePermissions:{type:Array,required:!0},nested:{type:Boolean,default:!1}},computed:{isRoot:function(){return Array.isArray(this.groupData)},sortedGroups:function(){return this.isRoot?[]:Object.keys(this.groupData).sort()},checkbox:function(){return this.$el.querySelector(\"input[type=checkbox]\")}},methods:{setChecked:function(){this.checkbox.indeterminate=!1,this.checkbox.checked=!0,this.$emit(\"update\")},setIndeterminate:function(){this.checkbox.checked=!1,this.checkbox.indeterminate=!0,this.$emit(\"update\")},setUnchecked:function(){this.checkbox.checked=!1,this.checkbox.indeterminate=!1,this.$emit(\"update\")},update:function(){var e=this.$refs.children.filter(function(e){return e.checkbox.checked}).length;if(e!==this.$refs.children.length){var t=this.$refs.children.filter(function(e){return e.checkbox.indeterminate}).length;e||t?this.setIndeterminate():this.setUnchecked()}else this.setChecked()},updateBelow:function(){return this.isRoot?this.updateContent():this.updateChildren()},updateContent:function(){return this.checkbox.checked?this.$refs.content.setAllChecked():this.$refs.content.setAllUnchecked()},updateChildren:function(){var e=this;this.$refs.children.forEach(function(t){t.checkbox.checked=e.checkbox.checked,t.updateBelow()})}}}},ChWA:function(e,t,s){var n=s(\"VU/8\")(s(\"4Hs9\"),s(\"gqMg\"),!1,function(e){s(\"p/0r\")},\"data-v-b3b5f75a\",null);e.exports=n.exports},GCFM:function(e,t){e.exports={render:function(){var e=this.$createElement,t=this._self._c||e;return t(\"div\",{staticClass:\"columns is-centered\"},[t(\"div\",{staticClass:\"column is-three-quarters\"},[this.initialised?t(\"div\",{staticClass:\"animated fadeIn\"},[t(\"center\",{staticClass:\"has-padding-bottom-large\"},[t(\"h5\",{staticClass:\"title is-5\"},[this._v(this._s(this.role.display_name))])]),this._v(\" \"),this.menus.length?t(\"checkbox-manager\",{attrs:{title:this.__(\"Menus\"),\"role-permissions\":this.roleMenus,\"group-data\":this.menus}}):this._e(),this._v(\" \"),this.menus.length?t(\"checkbox-manager\",{attrs:{title:this.__(\"Permisssions\"),\"role-permissions\":this.rolePermissions,\"group-data\":this.permissions}}):this._e(),this._v(\" \"),t(\"button\",{staticClass:\"button is-success has-margin-top-large is-pulled-right\",on:{click:this.update}},[this._v(\"\\n                \"+this._s(this.__(\"Update\"))+\"\\n            \")]),this._v(\" \"),t(\"div\",{staticClass:\"is-clearfix\"})],1):this._e()])])},staticRenderFns:[]}},Rxb0:function(e,t,s){var n=s(\"VU/8\")(s(\"SYJ6\"),s(\"ih1A\"),!1,null,null,null);e.exports=n.exports},S1b8:function(e,t){e.exports={render:function(){var e=this.$createElement;return(this._self._c||e)(\"a\",this._g({staticClass:\"card-header-icon\"},this.$listeners),[this._t(\"default\")],2)},staticRenderFns:[]}},SYJ6:function(e,t,s){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=s(\"NYxO\"),i=s(\"VN6J\"),r=s(\"QxPg\"),a=s(\"EQBe\"),o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e};r.default.library.add(a.L),t.default={name:\"ManagerContent\",directives:{tooltip:i.b},props:{groupData:{required:!0},rolePermissions:{type:Array,required:!0}},computed:o({},Object(n.c)(\"locale\",[\"__\"]),{permissionIds:function(){return this.groupData.map(function(e){return e.id})},status:function(){return this.checkedIds.length===this.permissionIds.length?\"checked\":0===this.checkedIds.length?\"unchecked\":\"indeterminate\"}}),watch:{status:{handler:function(){this.$emit(this.status)}},checkedIds:function(){this.removeGroupPermissions(),this.addCheckedPermissions()}},data:function(){return{checkedIds:[]}},created:function(){this.setCheckedIds()},methods:{setCheckedIds:function(){var e=this;this.checkedIds=this.permissionIds.filter(function(t){return e.rolePermissions.indexOf(t)>-1})},setAllChecked:function(){this.checkedIds=JSON.parse(JSON.stringify(this.permissionIds)),this.checkIfEmpty()},setAllUnchecked:function(){this.checkedIds=[],this.checkIfEmpty()},getClass:function(e){return Object.prototype.hasOwnProperty.call(e,\"type\")?1===e.type?\"has-text-warning\":\"has-text-success\":null},checkIfEmpty:function(){0===this.groupData.length&&this.$emit(this.status)},removeGroupPermissions:function(){var e=this;this.permissionIds.forEach(function(t){var s=e.rolePermissions.indexOf(t);-1!==s&&e.rolePermissions.splice(s,1)})},addCheckedPermissions:function(){var e=this;this.checkedIds.forEach(function(t){e.rolePermissions.push(t)})}},mounted:function(){this.checkIfEmpty()}}},Xn2I:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s(\"div\",{staticClass:\"card\"},[e.header?s(\"header\",{staticClass:\"card-header\"},[s(\"p\",{staticClass:\"card-header-title\"},[e.icon?s(\"span\",{staticClass:\"icon is-small has-margin-right-small\"},[s(\"fa\",{attrs:{icon:e.icon}})],1):e._e(),e._v(\" \"),!e.fixed&&e.title?s(\"span\",{staticClass:\"is-clickable\",on:{click:function(t){e.toggle()}}},[e._v(\"\\n                \"+e._s(e.title)+\"\\n            \")]):e.title?s(\"span\",[e._v(e._s(e.title))]):e._e()]),e._v(\" \"),e.search?s(\"div\",{staticClass:\"has-vertically-centered-content\"},[s(\"p\",{staticClass:\"control has-icons-left\"},[s(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:e.query,expression:\"query\"}],staticClass:\"input is-small\",attrs:{type:\"search\"},domProps:{value:e.query},on:{input:[function(t){t.target.composing||(e.query=t.target.value)},function(t){e.$emit(\"query-update\",e.query)}]}}),e._v(\" \"),s(\"span\",{staticClass:\"icon is-small is-left\"},[s(\"fa\",{attrs:{icon:\"search\"}})],1)])]):e._e(),e._v(\" \"),e._l(e.controls,function(t){return e._t(\"control-\"+t)}),e._v(\" \"),null!==e.badge?s(\"card-control\",[s(\"span\",{staticClass:\"tag is-link\"},[e._v(\"\\n                \"+e._s(e.badge)+\"\\n            \")])]):e._e(),e._v(\" \"),e.refresh?s(\"card-control\",{on:{click:function(t){e.$emit(\"refresh\")}}},[s(\"span\",{staticClass:\"icon is-small\"},[s(\"fa\",{attrs:{icon:\"sync\"}})],1)]):e._e(),e._v(\" \"),e.fixed?e._e():s(\"card-control\",{on:{click:function(t){e.toggle()}}},[s(\"span\",{staticClass:\"icon angle\",attrs:{\"aria-hidden\":!e.expanded}},[s(\"fa\",{attrs:{icon:\"angle-down\"}})],1)]),e._v(\" \"),e.removable?s(\"card-control\",{on:{click:function(t){e.destroy()}}},[s(\"a\",{staticClass:\"delete is-small\"})]):e._e()],2):e._e(),e._v(\" \"),s(\"div\",{staticClass:\"card-content is-paddingless\",style:e.contentStyle},[e._t(\"default\")],2),e._v(\" \"),e._t(\"footer\"),e._v(\" \"),e.overlay?s(\"overlay\",{attrs:{size:\"medium\"}}):e._e()],2)},staticRenderFns:[]}},bIv0:function(e,t,s){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=s(\"QxPg\"),i=s(\"EQBe\"),r=s(\"zhSu\"),a=s.n(r),o=s(\"zXii\"),c=s.n(o);n.default.library.add(i._6,i._13,i.h),t.default={name:\"Card\",components:{CardControl:a.a,Overlay:c.a},props:{nested:{type:Boolean,default:!1},collapsed:{type:Boolean,default:!1},icon:{type:Object,default:function(){return null}},title:{type:String,default:null},search:{type:Boolean,default:!1},badge:{type:Number,default:null},refresh:{type:Boolean,default:!1},fixed:{type:Boolean,default:!1},removable:{type:Boolean,default:!1},controls:{type:Number,default:0},overlay:{type:Boolean,default:!1}},computed:{searchInput:function(){return this.search?this.$el.querySelector(\"input[type=search]\"):null},header:function(){return this.icon||this.title||this.search||this.badge||this.refresh||!this.fixed||this.removable||this.controls},content:function(){return this.$el.querySelector(\".card-content\")},contentStyle:function(){return this.collapsed?{\"max-height\":0}:null}},data:function(){return{query:null,expanded:!this.collapsed}},methods:{toggle:function(){this.$emit(\"toggle\"),this.expanded?this.collapse():this.expand()},expand:function(){this.nested&&this.$emit(\"extend\",this.content.scrollHeight),this.$emit(\"expand\"),this.content.style[\"max-height\"]=this.content.scrollHeight+\"px\",this.expanded=!0},collapse:function(){var e=this;this.content.style[\"max-height\"]||(this.content.style[\"max-height\"]=this.content.scrollHeight+\"px\"),this.nested&&this.$emit(\"shrink\",this.content.scrollHeight),this.$emit(\"collapse\"),setTimeout(function(){e.content.style[\"max-height\"]=0},1),this.expanded=!1},shrink:function(e){return this.content.style[\"max-height\"]=parseInt(this.content.style[\"max-height\"],10)-e+\"px\",this.$emit(\"shrink\",e)},extend:function(e){return this.content.style[\"max-height\"]=parseInt(this.content.style[\"max-height\"],10)+e+\"px\",this.$emit(\"extend\",e)},focus:function(){this.searchInput.focus()},clearQuery:function(){this.query=null},destroy:function(){this.$emit(\"remove\"),this.$el.parentNode.removeChild(this.$el),this.$destroy()}}}},gqMg:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s(\"card\",{ref:\"card\",attrs:{title:e.title,collapsed:\"\",nested:e.nested,controls:1},on:{shrink:function(t){e.$emit(\"shrink\",t)},extend:function(t){e.$emit(\"extend\",t)}}},[s(\"card-control\",{attrs:{slot:\"control-1\"},slot:\"control-1\"},[s(\"div\",{staticClass:\"field\"},[s(\"input\",{staticClass:\"is-checkradio is-info\",attrs:{type:\"checkbox\",id:\"checkbox-\"+e._uid,name:\"checkbox-\"+e._uid},on:{change:e.updateBelow}}),e._v(\" \"),s(\"label\",{attrs:{for:\"checkbox-\"+e._uid}})])]),e._v(\" \"),s(\"div\",{staticClass:\"has-padding-medium\"},[e._l(e.sortedGroups,function(t){return s(\"checkbox-manager\",{key:t,ref:\"children\",refInFor:!0,attrs:{nested:\"\",title:t,\"group-data\":e.groupData[t],\"role-permissions\":e.rolePermissions},on:{shrink:function(t){e.$refs.card.shrink(t)},extend:function(t){e.$refs.card.extend(t)},update:e.update}})}),e._v(\" \"),e.isRoot?s(\"manager-content\",{ref:\"content\",attrs:{\"group-data\":e.groupData,\"role-permissions\":e.rolePermissions},on:{checked:e.setChecked,indeterminate:e.setIndeterminate,unchecked:e.setUnchecked}}):e._e()],2)],1)},staticRenderFns:[]}},i9nV:function(e,t,s){var n=s(\"mF/g\");\"string\"==typeof n&&(n=[[e.i,n,\"\"]]),n.locals&&(e.exports=n.locals);s(\"rjj0\")(\"9a58c2fc\",n,!0)},ih1A:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s(\"div\",{staticClass:\"columns is-multiline has-padding-medium\"},e._l(e.groupData,function(t,n){return s(\"div\",{key:n,staticClass:\"column is-half\"},[s(\"div\",{staticClass:\"field\"},[s(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:e.checkedIds,expression:\"checkedIds\"}],staticClass:\"is-checkradio\",attrs:{type:\"checkbox\",id:\"checkbox-\"+t.name,name:\"checkbox-\"+t.name},domProps:{value:t.id,checked:Array.isArray(e.checkedIds)?e._i(e.checkedIds,t.id)>-1:e.checkedIds},on:{change:function(s){var n=e.checkedIds,i=s.target,r=!!i.checked;if(Array.isArray(n)){var a=t.id,o=e._i(n,a);i.checked?o<0&&(e.checkedIds=n.concat([a])):o>-1&&(e.checkedIds=n.slice(0,o).concat(n.slice(o+1)))}else e.checkedIds=r}}}),e._v(\" \"),s(\"label\",{attrs:{for:\"checkbox-\"+t.name}},[s(\"span\",{class:e.getClass(t)},[e._v(\"\\n                        \"+e._s(t.description||t.name)+\"\\n                    \")]),e._v(\" \"),t.default?s(\"span\",{directives:[{name:\"tooltip\",rawName:\"v-tooltip\",value:e.__(\"Default\"),expression:\"__('Default')\"}],staticClass:\"icon is-small has-text-info has-margin-left-medium\"},[s(\"fa\",{attrs:{icon:\"exclamation-triangle\"}})],1):e._e()])])])}))},staticRenderFns:[]}},\"mF/g\":function(e,t,s){(e.exports=s(\"FZ+f\")(!1)).push([e.i,\".card-content[data-v-04649f03]{-webkit-transition:max-height .4s ease;transition:max-height .4s ease;overflow-y:hidden}.icon.angle[aria-hidden=true][data-v-04649f03]{-webkit-transform:rotate(180deg);transform:rotate(180deg)}.icon.angle[data-v-04649f03]{-webkit-transition:-webkit-transform .3s ease;transition:-webkit-transform .3s ease;transition:transform .3s ease;transition:transform .3s ease,-webkit-transform .3s ease}\",\"\"])},\"p/0r\":function(e,t,s){var n=s(\"pmfv\");\"string\"==typeof n&&(n=[[e.i,n,\"\"]]),n.locals&&(e.exports=n.locals);s(\"rjj0\")(\"dbf66fee\",n,!0)},pmfv:function(e,t,s){(e.exports=s(\"FZ+f\")(!1)).push([e.i,\".field[data-v-b3b5f75a]{width:15px}\",\"\"])},q3gz:function(e,t,s){var n=s(\"VU/8\")(s(\"sQdx\"),s(\"GCFM\"),!1,null,null,null);e.exports=n.exports},sQdx:function(e,t,s){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=s(\"NYxO\"),i=s(\"ChWA\"),r=s.n(i),a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e};t.default={components:{CheckboxManager:r.a},computed:a({},Object(n.c)(\"locale\",[\"__\"])),data:function(){return{roleId:this.$route.params.role,role:{},menus:[],permissions:{},roleMenus:[],rolePermissions:[],initialised:!1}},created:function(){this.get()},methods:{get:function(){var e=this;axios.get(route(\"system.roles.getPermissions\",[this.roleId],!1)).then(function(t){var s=t.data;e.set(s),e.initialised=!0}).catch(function(t){return e.handleError(t)})},set:function(e){this.menus=e.menus,this.roleMenus=e.roleMenus,this.rolePermissions=e.rolePermissions,this.permissions=e.permissions,this.role=e.role},update:function(){var e=this;axios.post(route(\"system.roles.setPermissions\",[this.roleId],!1),this.postParams()).then(function(t){var s=t.data;e.$toastr.success(s.message)}).catch(function(t){return e.handleError(t)})},postParams:function(){return{roleMenus:this.roleMenus,rolePermissions:this.rolePermissions}}}}},zhSu:function(e,t,s){var n=s(\"VU/8\")(s(\"/Nkn\"),s(\"S1b8\"),!1,null,null,null);e.exports=n.exports}});\n\n\n// WEBPACK FOOTER //\n// 29.js"],"mappings":"AAAA","sourceRoot":""}