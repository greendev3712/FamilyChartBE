webpackJsonp([43],{NJDH:function(t,a){t.exports={render:function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",[i("div",{staticClass:"columns is-centered"},[i("div",{staticClass:"column is-half-desktop"},[i("div",{staticClass:"level is-mobile"},[t.notifications.length?i("div",{staticClass:"level-item"},[i("a",{staticClass:"button is-success is-outlined",on:{click:t.updateAll}},[i("span",[t._v(t._s(t.__("Mark all read")))]),t._v(" "),i("span",{staticClass:"icon is-small"},[i("fa",{attrs:{icon:"check"}})],1)])]):t._e(),t._v(" "),i("div",{staticClass:"level-item"},[i("a",{class:["button animated fadeIn",{"is-loading":t.loading}],on:{click:t.fetch}},[i("span",[t._v(t._s(t.__("Reload")))]),t._v(" "),i("span",{staticClass:"icon is-small"},[i("fa",{attrs:{icon:"sync"}})],1)])]),t._v(" "),t.notifications.length?i("div",{staticClass:"level-item is-marginless"},[i("a",{staticClass:"button is-warning is-outlined has-margin-left-small",on:{click:t.destroyAll}},[i("span",[t._v(t._s(t.__("Clear all")))]),t._v(" "),i("span",{staticClass:"icon is-small"},[i("fa",{attrs:{icon:"trash-alt"}})],1)])]):t._e()]),t._v(" "),i("transition-group",{attrs:{tag:"ul","enter-active-class":"fadeIn","leave-active-class":"fadeOut"}},t._l(t.notifications,function(a){return i("li",{key:a.id,staticClass:"animated"},[i("div",{staticClass:"box has-background-light has-padding-medium has-margin-bottom-small",class:{"is-bold":!a.read_at}},[a.data.icon?i("fa",{attrs:{icon:a.data.icon}}):t._e(),t._v(" "),i("span",{class:["is-clickable",{"has-text-info":a.data.path&&"#"!==a.data.path}],on:{click:function(i){t.update(a)}}},[t._v("\n                            "+t._s(a.data.body)+"\n                        ")]),t._v(" "),i("span",{staticClass:"is-pulled-right"},[t._v("\n                            "+t._s(t.timeFromNow(a.created_at))+"\n                            "),i("a",{staticClass:"delete has-margin-left-medium is-medium",on:{click:function(i){t.destroy(a,t.index)}}})]),t._v(" "),i("span",{staticClass:"is-clearfix"})],1)])}),0),t._v(" "),t.loading||t.notifications.length?t._e():i("h4",{staticClass:"title is-5 has-text-centered"},[t._v("\n                "+t._s(t.__("You don't have any notifications"))+"\n            ")])],1)])])},staticRenderFns:[]}},QUOX:function(t,a,i){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=i("O4Lo"),e=i.n(n),s=i("NYxO"),o=i("C/JF"),c=i("fhbW"),r=i("lzLf"),l=i("JCQm");function f(t,a,i){return a in t?Object.defineProperty(t,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[a]=i,t}o.library.add(c.faBell,c.faCheck,c.faTrashAlt,c.faSpinner,c.faSync),a.default={data:function(){return{limit:200,notifications:[],offset:0,loading:!1}},computed:function(t){for(var a=1;a<arguments.length;a++){var i=null!=arguments[a]?arguments[a]:{},n=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(i).filter(function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable}))),n.forEach(function(a){f(t,a,i[a])})}return t}({},Object(s.mapState)(["user","meta"]),Object(s.mapState)("layout",["isTouch"])),created:function(){this.fetch=e()(this.fetch,500),this.fetch()},methods:{fetch:function(){var t=this;this.loading||(this.loading=!0,axios.get(route("core.notifications.index"),{params:{offset:this.offset,limit:this.limit}}).then(function(a){var i=a.data;t.notifications=t.offset?t.notifications.concat(i):i,t.offset=t.notifications.length,t.loading=!1}).catch(function(a){return t.handleError(a)}))},update:function(t){var a=this;axios.patch(route("core.notifications.update",t.id)).then(function(i){var n=i.data;t.read_at=n.read_at,a.$root.$emit("read-notification",t),t.data.path&&"#"!==t.data.path&&a.$router.push({path:t.data.path})}).catch(function(t){return a.handleError(t)})},updateAll:function(){var t=this;axios.post(route("core.notifications.updateAll")).then(function(){return t.readAll()}).catch(function(a){return t.handleError(a)})},readAll:function(){this.notifications.forEach(function(t){t.read_at=t.read_at||Object(r.a)(new Date,"Y-MM-DD H:mm:s")}),this.unreadCount=0,this.$root.$emit("read-all-notifications")},destroyAll:function(){var t=this;axios.post(route("core.notifications.destroyAll")).then(function(){t.notifications=[],t.$root.$emit("destroy-all-notifications")}).catch(function(a){return t.handleError(a)})},destroy:function(t,a){var i=this;axios.delete(route("core.notifications.destroy",t.id)).then(function(){i.notifications.splice(a,1),i.$root.$emit("destroy-notification",t)}).catch(function(t){return i.handleError(t)})},timeFromNow:function(t){return Object(l.a)(t)}}}},vTXj:function(t,a,i){var n=i("VU/8")(i("QUOX"),i("NJDH"),!1,null,null,null);t.exports=n.exports}});
//# sourceMappingURL=43.js.map